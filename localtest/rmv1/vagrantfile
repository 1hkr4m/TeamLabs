Vagrant.configure("2") do |config|
    config.vm.box = "centos/7"

    config.vm.define "web" do |web|
        web.vm.provision "shell", inline: <<-SHELL
        sudo sed -i 's/PasswordAuthentication no/PasswordAuthentication yes/g' /etc/ssh/sshd_config    
        sudo systemctl restart sshd.service
        sudo yum update
        SHELL
        web.vm.network "forwarded_port", guest: 22, host: 2322, id: "ssh"    
    end

    config.vm.define "app" do |app|
        app.vm.provision "shell", inline: <<-SHELL
        sudo sed -i 's/PasswordAuthentication no/PasswordAuthentication yes/g' /etc/ssh/sshd_config    
        sudo systemctl restart sshd.service
        sudo yum update
        SHELL
        app.vm.network "forwarded_port", guest: 22, host: 2323, id: "ssh"
    end

    config.vm.define "db" do |db|
        db.vm.provision "shell", inline: <<-SHELL
        sudo sed -i 's/PasswordAuthentication no/PasswordAuthentication yes/g' /etc/ssh/sshd_config    
        sudo systemctl restart sshd.service
        sudo yum update
        SHELL
        db.vm.network "forwarded_port", guest: 22, host: 2324, id: "ssh"
    end
end